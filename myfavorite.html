<!DOCTYPE html>
<html>
{% extends "base.html" %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Jquery time picker new -->

<script src="https://code.jquery.com/jquery-3.3.1.min.js"
integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
crossorigin="anonymous"></script>

<div class="min-vh-100 d-flex flex-column 
                justify-content-between">
  {% block title %} Best Restaurants in Trenton | Trenton Local Eats {% endblock %}
  {% block content %}
    <table>
      <script>
        var index = 0;
      </script>
      <tbody>
          <br>
          <h1 class="results"> My Favorite Restaurants</h1>
          {% if restaurantinfo | length == 0: %}
          {% else %}
              {% for restaurant in restaurantinfo: %}
                <div class="list-group" style="width:1050px; height:115px; margin: auto;">
                    <a href="resdetails?id={{restaurant.get_restaurantid()}}" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5 class="mb-1"><strong>{{restaurant.get_name()}}</strong></h5>
                          <!--add stars here ; need to grab from database-->
                          <div class="Stars" style="--rating: {{restaurant.get_stars()}};" aria-label="Rating of this restaurant is {{restaurant.get_stars()}} out of 5."></div>
                        </div>
                        <p class="mb-1">{{restaurant.get_address()}}</p>
                        <span class="badge badge-info badge-pill i"></span>
                        <span class="badge badge-info badge-pill ii">{{restaurant.get_cuisine()}}</span>
                        <span class="badge badge-info badge-pill iii">{{restaurant.get_price()}}</span>
                        <span class="badge badge-info badge-pill iv">{{restaurant.get_type()}}</span>

                    </a>
                </div>


                <!--Function to get whether restaurant is open or closed-->
                <script>
                  'use strict';
                  function statusFunc() {
                    let status = "{{restaurant.get_openclose()}}";
                    console.log(status);
                    let node = document.getElementsByClassName("badge badge-info badge-pill i");
                    if (status == "True"){
                      node[index].innerHTML = "Open";
                    }
                    else {
                        node[index].innerHTML = "Closed";
                    }
                    index++;
                  }
                  

                  statusFunc();

                </script>

                <!--Function to change colour depending on whether open or closed-->

                <script>
                  'use strict';

                  $('.badge').each(function(){
                    if($(this).text() == 'Open'){
                      $(this).css({'background-color' : '#32CD32'})
                    }
                    if($(this).text() == 'Closed'){
                      $(this).css({'background-color' : '#D22B2B'})
                    }


                  });
                </script>



              {% endfor %}
              
          {% endif %}
          

      </tbody>
    </table>
    <!-- THIS FOOTER IS SUS STYLE TEST IF IT CONTINUES WORKING -->
  <footer class="footer" style="position: fixed; bottom:0; width: 100%; text-align:center;">{% include 'footer.html' %}</footer>


  {% endblock %}

  
</html>